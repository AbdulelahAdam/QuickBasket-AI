server {
    listen 80;
    server_name _;

    # ✅ Fix 1: Send logs to Docker
    access_log /dev/stdout;
    error_log /dev/stderr;

    root /usr/share/nginx/html;
    index index.html;

    # ✅ Fix 2: Allow the index.html but keep it from being indexed directly if desired
    # (Removed the explicit 404 block)

    location / {
        # This is standard for SPAs (React/Vue/etc)
        # It tries to find the file, then the folder, then falls back to index.html
        try_files $uri $uri/ /index.html;
    }

    # ✅ Security Headers
    add_header X-Frame-Options DENY;
    add_header X-Content-Type-Options nosniff;
    add_header X-XSS-Protection "1; mode=block";
    
    # ⚠️ CSP Warning: If you use Google Fonts or external APIs, 
    # 'self' will block them. Add your backend URL here if needed.
    add_header Content-Security-Policy "default-src 'self'; style-src 'self' 'unsafe-inline'; script-src 'self'";
}
